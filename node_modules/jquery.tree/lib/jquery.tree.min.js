(function(){var t;t=function(t,e,i){var n,r,s;if(t==null){t=jQuery}n="tree";s={content:".content",prepend:true,listContainer:null,filter:":header"};r=function(){function i(i,n){var r;this.el=i;r=this;this.settings=t.extend({},s,n);this.$content=t(this.el);if(this.settings.listContainer!=null){this.$listContainer=t(this.settings.listContainer)}this.$headers=this.$content.find("*").filter(this.settings.filter);this.$list=this.listify(this.$headers);if(this.$listContainer!=null){this.$listContainer.append(this.$list)}else if(this.settings.prepend){this.$content.prepend(this.$list)}t("li:first").addClass("active");this.isOnScreen;t(e).scroll(function(i){return function(){return t.each(i.$headers,function(i,n){var r,s,l;r=t(n);l=r.offset().top-t(e).scrollTop();if(l<100){t(".active").removeClass("active");r.addClass("active");s=t("li");t(s.get(i)).addClass("active");return t(s.get(i)).parents("li").addClass("active")}})}}(this))}i.prototype.listify=function(e){var i,r,s,l,a;l=this;a=this.topHeaderLevel(e);if(a==null){return null}r=t("<ul/>");i=t();s=function(){if(i.length>0){r.find("li").last().append(l.listify(i));return i=t()}};e.each(function(){var e,u,o,f;o=t(this);if(!o.is("h"+a)){return i=i.add(o)}else{s();u=t("<a/>").html(o.html());f=o.attr("id");if(f==null){f=l.slugify(o.text());f=l.uniqueId(f);o.attr("id",f)}u.attr("href","#"+f);e=t("<li/>").append(u);e.data("plugin_"+n+"_header",o);o.data("plugin_"+n+"_item",e);return r.append(e)}});s();return r};i.prototype.isOnScreen=function(){var i;i=t(e);return console.log(i.scrollTop())};i.prototype.headerDepth=function(t){return parseInt(t.nodeName.slice(-1))};i.prototype.topHeaderLevel=function(t){var e,i;for(e=i=1;i<=6;e=++i){if(t.is("h"+e)){return e}}return null};i.prototype.uniqueId=function(e){if(e==null){e="id"}if(t("#"+e).length>0){e+=0;return this.uniqueId(e)}else{return e}};i.prototype.slugify=function(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};return i}();return t.fn[n]=function(e){return t(this.map(function(){var i;if(!t.data(this,"plugin_"+n)){i=new r(this,e);t.data(this,"plugin_"+n,i);return i.$list}}).get(0))}};(function(t,e,i){if(typeof define==="function"&&define.amd){return define(["jquery"],t)}else if(typeof exports==="object"){return t(require("jquery"),e,i)}else{return t(jQuery,e,i)}})(t,window,document)}).call(this);